# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

## 1단계 기능 요구사항 정리
### 요구 사항
- 노선에 역 추가시 노선 가운데 추가 할 수 있다.
- 노선에 역 추가시 노선 처음에 추가 할 수 있다.
- 이미 등록되어있는 역은 노선에 등록될 수 없다.

### 인수 조건
- upStation과 downStation 중 하나는 노선에 포함되어 있다.
- upStation과 downStation 중 하나는 노선에 포함되어 있지 않다.
- add시 기존 구간이 잘린다. 

### 인수 시나리오
- 노선에 역 추가시 노선 가운데 추가할 수 있다.
    - Given 1개의 구간을 가진 지하철 노선이 등록되어 있다.
    - When 가운데에 역을 추가한다.
    - Then 다시 조회한 노선의 역은 3개이다.
    - Then 구간은 2개다.
    - Then 역의 거리는 나뉘어져 있다.
- 둘다 기존 노선에 포함되는 경우
    - Given 1개의 구간을 가진 지하철 노선이 등록되어 있다.
    - When 같은 노선을 추가한다.
    - Then 실패한다.
- 둘다 기존 노선에 포함되지 않는 경우
    - Given 1개의 구간을 가진 지하철 노선이 등록되어 있다.
    - When 다른 노선을 추가한다.
    - Then 실패한다.
## 2단계 기능 요구사항 정리
### 요구사항
- 노선에 등록된 역 제거 시 해당 역이 노선 가운데 있어도 제거할 수 있다.
- 노선에 등록된 역 제거 시 해당 역이 상행 종점역이어도 제거할 수 있다.

### 인수 조건
- 삭제하려는 역은 노선에 존재 해야 한다.
- 노선 삭제 시 상행선과 하행선의 위치가 바뀐다.
- 역이 2개 일 때는 삭제가 불가하다.

### 인수 시나리오
- 노선에서 상행선을 삭제할 수 있다.
    - Given 3개의 역을 가진 노선이 주어진다.
    - When 상행선을 삭제한다.
    - Then Section이 1개가 된다.
    - Then Station은 2개가 된다.
    - Then Stations 응답에 삭제한 역은 존재하지 않는다.
- 노선에서 가운데 있는 역을 삭제 할 수 있다.
    - Given 4개의 역을 가진 노선이 주어진다.
    - When 가운데 있는 역을 삭제한다.
    - Then Section은 2개가 된다.
    - Then Station은 3개가 된다.
    - Then Stations 응답에 삭제한 역은 존재하지 않는다.
- 노선에서 마지막에 있는 역을 삭제할 수 있다.
    - Given 4개의 역을 가진 노선이 주어진다.
    - When 마지막에 있는 역을 삭제한다.
    - Then Section은 2개가 된다.
    - Then Station은 3개가 된다. 
    - Then Stations 응답에 삭제한 역은 존재하지 않는다.

## 3단계 기능 요구 사항 정리
### 요구사항
- 인수 조건은 인수 테스트 메서드 상단에 주석
- 인수 테스트 이후 기능 구현은 TDD로 진행
    - 도메인 필수, 서비스 선택
- 인수 테스트 주도 개발 프로세스에 맞춰서 기능을 구현
    - 요구사항 설명을 참고하여 인수 조건
    - 인수 조건을 검증하는 인수 테스트 작성
    - 인수 테스트를 충족하는 기능 구현

### 인수 조건
- 요청
    - GET: paths?source=1&target=3
    - source: 출발역 id
    - target: 도착역 id
- 응답
    - application/json
    - stations: 출발 - 경로 - 도착
    - distance: 거리
- 예외 상황
    - 출발역과 도착역이 같은 경우
    - 출발역과 도착역이 연결이 되어 있지 않은 경우
    - 존재하지 않은 출발역이나 도착역을 조회 할 경우

### 인수 시나리오
- 1개 노선 내 역 간의 경로를 찾을 수 있다.
    - Given 4개의 역을 가진 노선이 주어진다.
    - When 1개 노선에 속한 역의 경로를 조회하면,
    - Then 경로가 조회 된다.
- 2개 노선에 걸친 역 간의 경로를 찾을 수 있다.
    - Given 공통으로 1개의 역을 가진 2개 노선이 주어진다.
    - When 두개 노선에 걸친 역의 경로를 조회하면,
    - Then 경로가 조회 된다.
- 3개 노선에 걸친 역 간의 경로를 찾을 수 있다.
    - Given 공통으로 1개 씩의 역을 가진 3개 노선이 주어진다.
    - When 세개 노선에 걸친 역의 경로를 조회하면,
    - Then 경로가 조회 된다.
