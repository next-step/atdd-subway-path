# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

# 구간 추가 요구사항 반영
***
## 사용자 스토리
````
사용자로서
지하철 노선도를 조금 더 편리하게 관리하기위해
위치에 상관없이 지하철 노선에 역을 추가 할 수 있다
````
## 기능 요구사항(완료 조건)
- 노선에 역 추가시 노선 가운데 추가 할 수 있다. 
- 노선에 역 추가시 노선 처음에 추가 할 수 있다.
- 이미 등록되어있는 역은 노선에 등록될 수 없다

## TODO
- [x] 시나리오 작성
  - 성공 시나리오
    ````
    Given 지하철 노선을 생성한다.
    Given 해당 지하철 노선은
          상행역 : 종로3가역 / 하행역 : 시청역 / 길이 : 6 인 구간이 존재한다.
    When 생성한 지하철 노선에 
          상행역 : 종로3가역 / 하행역이 종각역 / 길이가 4 인 구간을 등록하면
    Then 지하철 노선 조회 시,
          - 종로3가역 다음역은 종각역이고, 종각역 다음역은 시청역이다.
          - 종각역과 시청역 구간의 길이 = 2 이다.
    ````

    ````
    Given 종로3가역, 시청역 구간이 등록된 지하철 노선을 생성하고
    When 생성한 지하철 노선에 상행역이 종로5가역, 하행역이 종로3가역 명시된 구간을 등록하면
    Then 지하철 노선 조회 시,
          - 상행종점역은 종로5가역이다.
          - 노선 전체 길이가 등록한 구간의 길이만큼 늘어난다.
    ````
  - 실패 시나리오
    ````
    Given 종로3가역, 시청역 구간이 등록된 지하철 노선을 생성하고
    When 생성한 지하철 노선에 상행역이 동대문역, 하행역이 종로5가역으로 명시된 구간을 등록하면
    Then 등록되지 않고 코드값 "등록 구간의 역들이 모두 노선에 존재하지 않습니다."라는 메시지를 반환한다.
    ````
    ````
    Given 지하철 노선을 생성한다.
    Given 해당 지하철 노선은
          상행역 : 종로3가역 / 하행역 : 시청역 / 길이 : 6 인 구간이 존재한다.
    When 생성한 지하철 노선에 
          상행역 : 종로3가역 / 하행역 : 종각역 / 길이가 6 이상인 구간을 등록하면
    Then 등록되지 않고 코드값 "등록 구간의 길이는 기존 구간의 길이보다 크거나 같을 수 없습니다."라는 메시지를 반환한다.
    ````
- [x] 인수테스트 작성
- [x] api 구현
- [x] 단위테스트
  - [x] 객체 단위 테스트


  
# 구간 제거 요구사항 반영
***
## 사용자 스토리
````
사용자로서
지하철 노선도를 조금 더 편리하게 관리하기위해
위치에 상관없이 지하철 노선에 역을 제거 할 수 있다
````
## 기능 요구사항(완료 조건)
- 노선에 등록된 역 제거 시 해당 역이 노선 가운데 있어도 제거할 수 있다.
- 노선에 등록된 역 제거 시 해당 역이 상행 종점역이어도 제거할 수 있다.

## TODO
- [x] 시나리오 작성
  - 성공 시나리오
    ````
    Given 지하철 노선을 생성한다.
    Given 해당 지하철 노선은
          상행역 : 종로3가역 / 하행역 : 시청역 / 길이 : 6
          상행역 : 시청역 / 하행역 : 서울역 / 길이 : 10 인 구간들이 존재한다.
    When 생성한 지하철 노선에 시청역을 삭제하면
    Then 지하철 노선 조회 시,
          - 종로3가역 다음역은 서울역이다.
          - 종로3가역과 시청역 구간의 길이 = 16 이다.
    ````

    ````
    Given 지하철 노선을 생성한다.
    Given 해당 지하철 노선은
          상행역 : 종로3가역 / 하행역 : 시청역 / 길이 : 6
          상행역 : 시청역 / 하행역 : 서울역 / 길이 : 10 인 구간들이 존재한다.
    When 생성한 지하철 노선에 종로3가역을 삭제하면
    Then 지하철 노선 조회 시,
          - 상행종점역은 시청역이다.
          - 노선 전체 길이는 10이다.
    ````
    
    ````
    Given 지하철 노선을 생성한다.
    Given 해당 지하철 노선은
          상행역 : 종로3가역 / 하행역 : 시청역 / 길이 : 6
          상행역 : 시청역 / 하행역 : 서울역 / 길이 : 10 인 구간들이 존재한다.
    When 생성한 지하철 노선에 서울역을 삭제하면
    Then 지하철 노선 조회 시,
          - 하행종점역은 시청역이다.
          - 노선 전체 길이는 6이다.
    ````
  - 실패 시나리오
    ````
    Given 지하철 노선을 생성한다.
    Given 해당 지하철 노선은
          상행역 : 종로3가역 / 하행역 : 시청역 / 길이 : 6 인 구간만 존재한다.
    When 생성한 지하철 노선에 시청역을 삭제하면
    Then 삭제되지 않고 코드값 "상행 종점역과 하행 종점역만 있는 노선입니다."라는 메시지를 반환한다.
    ````
- [x] 인수테스트 작성
- [x] api 구현
- [x] 단위테스트
  - [x] 객체 단위 테스트

# 경로 조회 기능
***
## 기능 요구사항
- 출발역 id와 도착역 id를 통해 출발역으로부터 도착역까지의 경로에 있는 역 목록 및 거리를 알 수 있다.
### 요청 / 응답 포맷
- Request
  - source: 출발역 id
  - target: 도착역 id
  ````
  HTTP/1.1 200
  Request method:	  GET
  Request URI:      http://localhost:55494/paths?source=1&target=3
  Headers:          Accept=application/json
                    Content-Type=application/json; charset=UTF-8
  ````
- Response
  - stations: 출발역으로부터 도착역까지의 경로에 있는 역 목록
  - distance: 조회한 경로 구간의 거리
  ````
  HTTP/1.1 200
  Content-Type: application/json
  Transfer-Encoding: chunked
  Date: Sat, 09 May 2020 14:54:11 GMT
  Keep-Alive: timeout=60
  Connection: keep-alive
  {
      "stations" : [
        {
          "id": 1,
          "name": "교대역"
        },
        {
          "id": 4,
          "name": "남부터미널역"
        },
        {
          "id": 3,
          "name": "양재역"
        }
      ],
      "distance": 5
  }
  ````

## TODO
- [x] 시나리오 작성
  - 성공 시나리오
    - Scenario: 경로가 단건일 경우, 조회 성공 
      ````
      Given 해당 지하철 노선은
            상행역 : 동대문역 / 하행역 : 종로3가역 / 길이 : 6
            상행역 : 종로3가역 / 하행역 : 서울역 / 길이 : 10 인 구간들이 존재하는 노선을 생성한다.
      When 서울역부터 동대문역까지의 경로를 조회하면
      Then 경로에 있는 역 목록은 서울역, 종로3가역, 동대문역 순서대로 구성된다.
      Then 구간의 거리는 16이다.
      ````
    - Scenario: 경로가 다건일 경우, 최단 경로 조회 성공
      ````
      Given 상행역 : 동대문역 / 하행역 : 종로3가역 / 길이 : 6
            상행역 : 종로3가역 / 하행역 : 서울역 / 길이 : 10 인 구간들이 존재하는 노선을 생성한다.
      Given 상행역 : 동대문역 / 하행역 : 충무로역 / 길이 : 4
            상행역 : 충무로역 / 하행역 : 서울역 / 길이 : 8 인 구간들이 존재하는 노선을 생성한다.
      When 서울역부터 동대문역까지의 경로를 조회하면
      Then 경로에 있는 역 목록은 서울역, 충무로, 동대문역 순서대로 구성된다.
      Then 구간의 거리는 11이다.
      ````
    - Scenario: 노선이 다른 경로 조회 성공
      ````
      Given 상행역 : 동대문역 / 하행역 : 종로3가역 / 길이 : 6 구간이 존재하는 노선을 생성한다.
      Given 상행역 : 동대문역 / 하행역 : 충무로역 / 길이 : 4 구간이 존재하는 노선을 생성한다.
      When 종로3가역부터 충무로역까지의 경로를 조회하면
      Then 경로에 있는 역 목록은 종로3가역, 동대문역, 충무로역 순서대로 구성된다.
      Then 구간의 거리는 10이다.
      ````    
  - 실패 시나리오
    - Scenario: 경로가 없으면 조회 실패
      ````
      Given 상행역 : 동대문역 / 하행역 : 종로3가역 / 길이 : 6 구간들이 존재하는 노선을 생성한다.
      Given 상행역 : 충무로역 / 하행역 : 서울역 / 길이 : 8 구간이 존재하는 노선을 생성한다.
      When 종로3가부터 충무로역까지의 경로를 조회하면
      Then "경로가 존재하지 않습니다."라는 메시지를 반환한다.
      ````
    - Scenario: 출발역이나 도착역이 존재하지 않으면 조회 실패
      ````
      Given 상행역 : 동대문역 / 하행역 : 종로3가역 / 길이 : 6 인 구간들이 존재하는 노선을 생성한다.
      When 종로5가부터 동대문역까지의 경로를 조회하면
      Then "출발역이 존재하지 않습니다."라는 메시지를 반환한다.
      When 종로3가부터 시청역까지의 경로를 조회하면
      Then "도착역이 존재하지 않습니다."라는 메시지를 반환한다.
      ````   
    - Scenario: 출발역과 도착역이 같으면 조회 실패
      ````
      Given 상행역 : 동대문역 / 하행역 : 종로3가역 / 길이 : 6
      When 종로3가부터 종로3가역까지의 경로를 조회하면
      Then "출발역과 도착역이 같을 수 없습니다."라는 메시지를 반환한다.
      ````     
- [x] 인수테스트 작성
- [ ] 단위테스트
  - [ ] 객체 단위 테스트
- [ ] api 구현
